디도스시험문제
1. 디도스 공격의 의미
	1. 서버에 악성코드를 설치하는 공격     X
	2. 서버 데이터를 훔치는 공격     X
	3. 서비스를 정상적으로 사용하지 못하게 만드는 공격     O
	4. 계정 정보를 탈취하는 공격     X
2. 디도스 방어 장비의 역할
	1. 서버 패치 자동화     X
	2. 악성 트래픽 차단     O
	3. 계정 관리     X
	4. 데이터 백업     X


디도스: DDoS(Distributed Denial of Service)는 여러 대의 컴퓨터(좀비 PC)를 이용해 특정 웹사이트나 온라인 서비스에 대량의 접속 요청을 동시에 보내 서버를 마비시켜 정상적인 서비스 이용을 방해하는 사이버 공격

## SNIPER ONE 특장점 ##
- 간단한 설치와 운영모드
	- 서비스를 위해 In-Line 모드에서 By-Pass 모드로 변경 가능함
	- 네트워크 구성 및 패킷을 변경하지 않고 설치가 가능함
- HA 지원
	- 이중화를 지원해서 서비스가 쉽게 안 끊기게함
- Fail-Over
	- 서비스를 살리고 보안을 죽이겠다!
- 정교한 정책설정
	- IP POLL, In/Outbound, Segment 별 정책설정 가능
- SSS(TCP), DDoS 패턴추출
	- 이건 잘 몰라

## SNIPER ONE 라인업 ##
버전 숫자가 크면 더 좋음

## 동작원리 ##
- In-Line: 패킷 감지 및 차단
- Span: 패킷 감지
- By-Pass: 고장났을 때 그냥 통과시켜서 보안을 죽이고 서비스를 살림

## 접속방법 ##
- SniperLauncher
	- DDoS
		- IP: 10.200.10.17:4000
		- sniper/**S**niper12#
	- IPS
		- IP: 10.200.10.14:4000
		- sniper/sniper12#
- PuTTY
	- 계측기
		- IP: 10.100.4/6.102:22
		- wins21/보안00!#@$
	- IPS
		- IP: 10.200.10.14:222
		- root/sniper!#@$

## SNIPER ONE-d GUI 구성 ##
- 상황판: 전체 상황판
- 모니터: 실시간 현재 정보
	- 전체 트래픽: 현재 흐르는 TCP/UDP/IMCP/차단 등의 데이터를 그래프로 보여줌
	- 탐지내역: 현재 탐지된 패킷
	- 차단내역: 현재 차단된 IP
- 로그: 과거 내역
	- 전체 트래픽: 과거에 흘렀던 TCP/UDP/IMCP/차단 등의 데이터를 그래프로 보여줌
	- 탐지내역: 이전에 탐지됐던 패킷
	- 차단내역: 이전에 차단됐던 패킷
- 보안정책: 보안정책이 보안정책이지 뭐야 이새끼야!
	- 탐지정책설정: 말 그대로 DDoS GUI에서 탐지될 패킷들에 대한 탐지정책을 세움


## 디도스 유형 ##

|    구분    |             대용량 트래픽 전송             |                 PPS 증가                 |   웹 서비스 지연   |
| :------: | :--------------------------------: | :------------------------------------: | :----------: |
| 사용 프로토콜  |            주로 UDP/ICMP             |                  TCP                   |     HTTP     |
| 공격 PC 위치 |                 국내                 |                 국내/국외                  |    국내/국외     |
|  IP변조여부  |              변조/실제 IP              |                변조/실제 IP                |     실제IP     |
|  공격 유형   | 1000~1500byte<br>1Gbyte<br>수십만 PPS |   64byte 이하 100MByte<br>수십만~수백만 PPS    | 동일 URL 접속 시도 |
|  공격 효과   |             회선 대역폭 초과              |     네트워크 장비, 보안장비,<br>서버 등의 부하 발생      |  웹 서버 부하 발생  |
|  피해 시스템  |      동일 네트워크에서 사용중인<br>모든 시스템      | 공격 대상 시스템 또는 동일 네트워크<br>에서 사용중인 모든 시스템 |  공격 대상 시스템   |
|    비고    |   우리가 보통 생각하는 일반적인<br>형태의 디도스 공격   |                                        |              |

## DDoS 공격 종류 ##
- Bandwidth 공격
	- DoS 공격의 한 방법으로서 UCP/ICMP 프로토콜을 이용하여 클라이언트가 서버에 가상의 데이터를 연속적으로 보내어 서버의 부하를 발생시켜 정상적인 서비스를 하지 못하도록 함
- Reflection/Amplification Attack
	- ? 설명이 없음
- TCP Syn Flooding (Half open connection)
	- TCP의 3-way handshake의 취약점을 이용한 공격
	- TCP 프로토콜에서 통신하기 전 3-way handshake를 통해서 통신을 시작해야하는데 Syn을 보내고 Syn/Ack을 받으면 다시 Ack를 보내야지 통신을 시작할 수 있음
	- 근데 여기서 Ack을 안 보내면 서버는 Ack를 받을 때까지 일정시간 대기하는데 이게 Queue에 쌓이고 이게 다 차면 TCP 통신이 안 되게 돼서 정상적인 서비스가 안 되게 됨
- TCP Syn+Ack Flooding, Ack Flooding (Half open connection)
	- 대충 TCP Syn Flooding이랑 비슷한데 이건 L4에 좀 더 영향이 많이감(정확하진 않음)
- Cache-Control Attack (HTTP)
	- PASS!
- Combined DoS Attack
	- Bandwidth + 서비스거부 합체공격임
	- Bandwidth 공격에 서비스거부 공격까지 합쳐서 공격을 받는 네트워크가 Bandwidth 공격으로 인해 망 장애를 해결하려고 노력할 때 서비스 거부 공격까지 해서 Bandwidth 공격을 처리해도 서비스 거부 공격때문에 서비스가 정상적으로 이뤄지지 않도록 하는 것
- Sloworis DoS Attack
	- HTTP 서버에 연결을 시도한 후 해당 연결이 지속되게 만들어 웹 서버의 허용된 리소스를 모두 소진시켜 서비스를 불능상태로 만들도록 설계된 새로운 DDoS 공격 도구
		1) 세션을 맺고 비정상적인 GET 요청을 보냄
		2) 서버는 비정상적인 요청을 받았으니 Open-connection을 유지하며 정상적인 요청을 기다림
		3) 안 보내지롱, 비정상만 보내버려잇! 서버의 GG
- SlowRead Dos Attack
	- 공격자는 HTTP Request의 Window size를 작게 조작하여 HTTP Response의 수신 속도를 지연시키는 방법으로 Connection 자원을 고갈시킴
	- 이건 TCP 프로토콜 규약을 어기는 게 아니기 때문에 정상 트래픽과 공격 트래픽을 구분하기가 어려움
- RUDY(R U Dead-Yet)
	- 공격자가 긴 데이터를 Segentation 해서 HTTP로 전송하는 방식으로 서비스 거부를 유발함


## RateLinit ##
- Flooding 류의 이상 트래픽이 발생해도 서비스가 정상유지될 수 있도록 서비스별 Traffic Bandwidth를 보장하는 기술



## SSS(Smart Session Shaping) TCP ##
- 인증된 Syn과 인증되지 않은 Syn을 구분하여 비인증된 Syn에 대해서는 CPS 임계치만큼의 좁은 통로로 연결하게 하고, 임계치 이상의 Syn은 Drop함. 인증된 Syn은 별도의 넓은 통로를 통과하게 해서 서비스를 원활하게 유지함
- SSS 엔진은 **등록된 객체의 TCP SYN**에 대해서만 관리하는 기능
- CPS 임계치는 SYN 패킷 수이며, IP수를 뜻하는 게 아님



































