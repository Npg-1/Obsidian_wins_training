# 네트워크 주소체계 #

## IP(Internet Protocol) Address ##
- 장비에 사용자가 입력한 32bit의 논리적 주소체계
- 8bit씩 4덩어리로 구분하고, 각 덩어리를 10진수로 변환하여 표현 (0~255)
- 인터넷을 통해 상대방과 연결하기 위해서는 반드시 IP주소를 알아야함 -> DNS
- 사용자가 통신시 IP주소만을 사용하여 통신을 하는 것으로 착각할 수 있음
- 하지만 LAN 범위에서는 IP가 아닌 MAC 주소로만 통신가능
- 따라서 IP주소와 MAC 주소를 매핑시키는 절차가 필요
	- -> [[ARP]] 사용


---
## IP 주소 체계 ##
- 사용가능한 IPv4 주소: 2<sup>32</sup> = 약 43억개
- 현재는 IPv4 주소 고갈로 인해 원활한 공인 IP의 수급이 힘듦
- IPv4 주소 고갈을 극복하기 위한 방안들
	- IPv6 주소 사용, 크기: 2<sup>128</sup> = ㅈㄴ큼, 주소 고갈 걱정이 전혀 없음
	- 서브네팅: 하나의 네트워크를 여러개로 분할해서 사용하는 방법 (<=> 슈퍼네팅: 작은 네트워크를 연결해 하나의 큰 네트워크를 만드는 방법)
	- 사설네트워크: 사설ip로 형성된 망으로 공인 IP는 세계에 단 하나밖에 없어야 하지만 사설 IP는 폐쇄적인 환경에서 독립적으로 사용하기 때문에 사설망과 연결된 공인 IP만 다르다면 다른 사설망과 동일한 IP가 있어도 문제 없음
	- NAT: 
	- DHCP: 컴퓨터의 네트워크를 자동으로 세팅해주는 서버..?
- IP 주소는 Network ID + Host ID로 구성
- Network ID가 같은 IP: 동일한 네트워크에 소속
- 같은 네트워크이면
	- -> 같은 브로드캐스트 [[용어|도메인]]
	- -> 라우터를 거치지 않고 통신이 가능
- 네트워크의 맨 처음 IP: Network ID
	- ex) 192.168.100.0
- 네트워크의 맨 끝 IP: Broadcast
	- ex) 192.168.100.255


---
## 공인 IP와 사설 IP ##

- 공인 IP
	- 전세계에서 유일하게 쓸 수 있는 IP
	- IPv4 주소 체계에서 모든 기기에 할당하기에 개수가 부족
- 사설 IP
	- IP 부족문제를 해결하기 위해 등장
	- 한 네트워크에 속한 사용자끼리만 인식할 수 있는 임시 IP
	- 사설망을 벗어나면 사용할 수 없음


---
## 서브넷 마스크 ##

\# 서브넷 마스크에 대한 원활한 이해를 위해 검색한 추가내용 기입함
*서브넷: IP 주소 공간을 더 작은 네트워크로 분할하는 기술로 IP 주소 공간을 서브넷으로 분할하면 네트워크를 더 효율적으로 관리하고
더 많은 호스트들을 지원하거나 보안을 강화할 수 있음*

*IPv4 주소는 4개의 [[용어|옥텟]]으로 되어있고 네트워크 부분과 호스트 부분으로 나눌 수 있음
하나의 로컬 네트워크에서는 IP 주소의 네트워크 부분은 같아야하고, 호스트 부분은 달라야함*

[참고한 자료](https://namu.wiki/w/%EC%84%9C%EB%B8%8C%EB%84%B7%20%EB%A7%88%EC%8A%A4%ED%81%AC) 


- 서브넷 마스크: IP주소를 네크워크 ID와 호스트 ID로 구분해주는 역할
	- 네트워크 ID에 해당하는 비트는 1
	- 호스트 ID에 해당하는 비트는 0
		- ex) 11111111.11111111.11111111.00000000 -> 255.255.255.0
- 서브넷 마스크 적용규칙
- 2진수로 표현하였을 경우 1이 연속적으로 표기되어야함
	- ex) 11111111.11111111.11111101.00000000 -> 이러면 안 되는 것임 
- 연속된 1의 개수를 표시하는 방법으로 서브넷 마스크를 간단하게 표기 가능 (Prefix)
	- 192.168.100.0, 255.255.255.0 -> 192.168.100.0/24


IPv4 주소 . . . . . . . . . : 10.100.4.12
서브넷 마스크 . . . . . . . : 255.255.255.0

위의 값을 아래의 한 줄로 바꿀 수 있음
10.100.4.12/24 -> '/' 앞의 숫자는 IP 주소이고, 뒤의 24는 서브넷 마스크를 2진수로 바꿨을 때 1의 개수임(255가 2<sup>8</sup> 이므로 8개가 있다고봄)


---
## IP 주소 Class ##
- IP 주소는 네트워크 부분과 호스트 부분으로 분리
- IP주소 범위에 따라 서브넷 마스크를 기본값으로 정함

클래스: IP주소를 효율적으로 분배하기 위한 개념

A클래스: 전체 공인 IP를 절반으로 나눈 것
	0.0.0.0~127.255.255.255<sub>(10)</sub> <-> 00000000.00000000.00000000.00000000~01111111.11111111.11111111.11111111<sub>(2)</sub> 
B클래스: A클래스의 절반
	128.0.0.0~191.255.255.255<sub>(10)</sub> <-> 10000000.00000000.00000000.00000000~10111111.11111111.11111111.11111111<sub>(2)</sub> 
C클래스: B클래스의 절반
	192.0.0.0~223.255.255.255<sub>(10)</sub> <-> 11000000.00000000.00000000.00000000~11011111.11111111.11111111.11111111<sub>(2)</sub> 
D클래스: C클래스의 절반
	224.0.0.0~239.255.255.255<sub>(10)</sub> <-> 11100000.00000000.00000000.00000000~11101111.11111111.11111111.11111111<sub>(2)</sub> 
E클래스: D클래스의 절반
	240.0.0.0~255.255.255.255<sub>(10)</sub> <-> 11110000.00000000.00000000.00000000~11111111.11111111.11111111.11111111<sub>(2)</sub> 


A클래스는 넷마스크를 255.0.0.0을 쓰라고 지정됨
A클래스 네트워크 개수: 128     - 특수목적 IP 대역(0.0.0.0, 127.0.0.0) 2개는 뺴서 실제로는 126
A클래스의 각 네트워크가 가질 수 있는 호스트 개수: 2<sup>24</sup> = 약 1600만    - 네트워크 주소 1개, 브로드캐스트 주소 1개, 실제 개수: 2<sup>24</sup> - 2


넷마스크가 255.255.255.128이라 가정해보자
11111111.11111111.11111111.10000000

내 ip가 192.168.5.5
10111110.10101000.00000101.00000101

10111110.10101000.00000101.0000000<sub>(10)</sub>   -> 내가 속한 네트워크 주소 
	192.168.5.0<sub>(2)</sub>
10111110.10101000.00000101.01111111<sub>(10)</sub>  -> 내가 속한 브로드캐스트 주소
	192.168.5.127<sub>(2)</sub>

1011_1110.1010_1000.0000_0000.0000_1010 <-> 192.168.0.10
1011_1110.1010_1000.0000_0000.1001_0100 <-> 192.168.0.148
1111_1111.1111_1111.1111_1111.1000_0000 <-> 255.255.255.128   (서브넷 마스크)





B클래스
10xxxxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx
서브넷마스크 255.255.0.0
네트워크 개수: 2^14 = 약 16000개
호스트개수: 2^16 = 약64000개

ex) 150.20.0.0 ~ 150.20.0.0
네트워크 주소: 150.20.0.0
브로드캐스트 주소: 150.20.255.255

실제 사용 가능한 주소: 150.20.0.1~150.20.255.254


C클래스
110xxxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx
서브넷마스크 255.255.255.0
네트워크 개수: 2^21 = 약 200만개
호스트개수: 2^8 = 256개 => 실제로는 (네트워크, 호스트) 하나씩 빼서



192.168.0.0     네트워크
192.168.0.255  브로드캐스트
192.168.0.1 ~  192.168.0.254  사용가능한 주소범위

D클래스: 멀티캐스트 주소
E클래스: 현재 사용 안 함



---

## 예약된 IP 주소 ##
- 아래는특수목적으로 사용되는 IP로 주소는 실제 호스트에 분배 불가능
	- 사설 IP로만 사용가능, 공인 IP로는 불가
	- 10.0.0.0 ~ 10.255.255.255: A클래스 사설네트워크 IP           크면 이거
	- 172.16.0.0 ~ 172.16.255.255: B클래스 사설네트워크 IP        중간이면 이거
	- 192.168.0.0 ~ 192.168.255.255: C클래스 사설네트워크 IP     작으면 이거
- 0.0.0.0 ~ 0.255.255.255:
- D, E 클래스 IP


---
## Classful 방식의 네트워크 구성 ##
- 클래스 별 기본적인 서브넷 마스크 값을 사용하는 구성
	- Q) 한 사무실에서 약 150대의 PC를 네트워크에 연결하려고한다. 어느 클래스의 IP를 배정하는 것이 좋은가?
	- A) C클래스를 배정, A나 B면 낭비가 심함
	- \* 중요한 점은 이것도 낭비가 심해서 요즘에는 안 쓰고 CIDR 기법을 사용함


---
## Subneting ##
- IP를 분할해서 절반씩 나눠 사용하는 기법
- IP를 낭비 없이 효율적으로 분배하기 위하여 사용
- 브로드캐스트 도메인의 크기를 분할
- 클래스 별 기본 서브넷 마스크를 사용하지 않음
	- Classleass 방식

Q) 두 개의 강의실에 각각 100개씩의 컴퓨터를 분리된 네트워크로 구성하려고 한다.
	이때 사용 가능한 IP가 C클래스 IP 1개 네트워크일 경우 어떻게 IP를 할당할 수 있을 것인가?
A) C 클래스 네트워크를 2개로 서브네팅하여 각각 128개씩 IP를 할당할 수 있음


---
## 서브네팅 방법 ##


서브네팅 예제
1. 211.100.10.0 ~ 211.100.10.255의 C 클래스의 네트워크를 네트워크당 60개의 ip를 사용가능하도록 서브넷팅하라
	Q1) 서브넷마스크는? 
		/26   255.255.255.192
	Q2) 서브넷의 갯수는?   
		A2) 4개
	Q3) 네트워크당 사용가능한 ip 개수는?    
		A3) 개당 62개의 IP 사용가능
	Q4) 첫 번째 서브넷의 브로드캐스트 주소는 몇일까?
		A4) 211.100.10.63
	Q5) 두 번째 서브넷의 사용가능한 IP 범위는?
		A5) 211.100.10.65 ~ 211.100.10.126
		
	서브넷1: 211.100.10.0 ~ 211.100.10.63
	서브넷2: 211.100.10.64 ~ 211.100.10.127
	서브넷3: 211.100.10.128 ~ 211.100.10.191
	서브넷4: 211.100.10.192 ~ 211.100.10.255
		
2. 211.100.10.0 ~ 211.100.10.255의 C 클래스의 네트워크를 네트워크당 30개의 ip를 사용가능하도록 서브넷팅하라
	Q1) 서브넷마스크는? 
		/26   255.255.255.224
	Q2) 서브넷의 갯수는?   
		A2) 8개
	Q3) 네트워크당 사용가능한 ip 개수는?    
		A3) 개당 30개의 IP 사용가능
	Q4) 첫 번째 서브넷의 브로드캐스트 주소는 몇일까?
		A4) 211.100.10.31
	Q5) 두 번째 서브넷의 사용가능한 IP 범위는?
		A5) 211.100.10.33 ~ 211.100.10.62
		
	서브넷1: 211.100.10.0 ~ 211.100.10.31
	서브넷2: 211.100.10.32 ~ 211.100.10.63
	서브넷3: 211.100.10.64 ~ 211.100.10.95
	서브넷4: 211.100.10.96 ~ 211.100.10.127
	서브넷5: 211.100.10.128 ~ 211.100.10.159
	서브넷6: 211.100.10.160 ~ 211.100.10.191
	서브넷7: 211.100.10.192 ~ 211.100.10.223
	서브넷8: 211.100.10.224 ~ 211.100.10.255
	
3. 211.100.10.0 ~ 211.100.10.255의 C 클래스의 네트워크를 네트워크당 13개의 ip를 사용가능하도록 서브넷팅하라
	Q1) 서브넷마스크는? 
		A1) 225.225.225.240
	Q2) 서브넷의 갯수는?   
		A2) 16
	Q3) 네트워크당 사용가능한 ip 개수는?    
		A3) 16
	Q4) 첫 번째 서브넷의 브로드캐스트 주소는 몇일까?
		A4) 
	Q5) 두 번째 서브넷의 사용가능한 IP 범위는?
		A5) 


4. 151.92.0.0 인 B 클래스(65536개의 IP)의 네트워크를 네트워크당 6500개의 ip를 사용가능하도록 서브넷팅하라
	Q1) 서브넷마스크는?     255.255.0.0
		A1) 255.255.224.0
	Q2) 서브넷의 갯수는?   
		A2) 8
	Q3) 네트워크당 사용가능한 ip 개수는?    
		A3) 8190
	Q4) 첫 번째 서브넷의 브로드캐스트 주소는 몇일까?
		A4) 151.92.63.254
	Q5) 두 번째 서브넷의 사용가능한 IP 범위는?
		A5) 151.92.32.1 ~ 151.92.63.254


65536/1, 32768/2, 16384/4, 8192(2^13)/8(2^3)

뒤에서 13개는 0
11111111 11111111 11100000 00000000
255.255.224.0






201.102.1.0
1팀: 201.102.1.0 ~ 201.102.1.127       201.102.1.0/25
2팀: 201.102.1.128 ~ 201.102.1.191    201.102.1.128/26
3팀: 201.102.1.191 ~ 201.102.1.223    201.102.1.191/27
4팀: 201.102.1.224 ~ 201.102.1.255    201.102.1.224/27



133.200.0.0/16 네트워크를 다음과 같은 개수로 할당하시오
22, 25, 230, 500, 1000, 2400, 2600, 4000
VLSM 서브네팅하고 각 네트워크의 네트워크주소/prefix를 표시하시오 

65536
32768
16384
8192
4096
2048
1024
512
256
128
64
32
16
8
4
2
1
14개
32개 
20개 / 12개


1팀(4000): 4096     133.200.0.0 ~ 133.200.15.255     133.200.0.0/20
2팀(2600): 4096     133.200.16.0 ~ 133.200.31.255    133.200.16.0/20
3팀(2400): 4096     133.200.32.0 ~ 133.200.47.255    133.200.32.0/20
4팀(1000): 1024     133.200.48.0 ~ 133.200.51.255    133.200.48.0/22
5팀(500): 512        133.200.52.0 ~ 133.200.53.255     133.200.50.0/23
6팀(230): 256        133.200.54.0 ~ 133.200.54.255     133.200.52.0/24
7팀(25): 32           133.200.55.0 ~ 133.200.55.31       133.200.53.0/27
8팀(22): 32           133.200.55.32 ~ 133.200.55.63      133.200.53.32/27


133.200.53.32/27
1000 0101    1100 1000    0011 0101    0010 0000

---
## VLSM (Variable Length Subnet Mask) ##
- 서브네팅 된 네트워크를 다시 서브네팅
	- 서로 다른 크기의 서브넷 구성이 가능함
- 서브네팅을 수행하고 가장 큰 네트워크를 필요한 곳에 할당한 다음에 남은 서브넷을 다시 서브넷팅한다. 


---
## CIDR (Classless Interdomain Routing) ##
- 서브네팅 된 네트워크를 병합
- 병합할 네트워크 범위에 주의


---
---
# TCP/IP 프로토콜 #

---
---
# 프로토콜의 개념 #

## 프로토콜(Protocol) ##
- 개체간의 효율적인 통신을 위한 규칙
- 데이터의 포맷, 전송과 관련된 규칙을 정의함
- 서로 연결된 네트워크에는 같은 규칙을 사용하여야 통신 가능
- 현재 인터넷 기반의 네트워크는 TCP/IP 프로토콜을 기반으로 구성되어 있음


---
---
# 주요 네트워크 프로토콜 #

## 프로토콜(Protocol) ##


---
## 이더넷 헤더 ##
| Preamble |  SFD  | 목적지 주소 | 출발지 주소 |  타입   |     데이터     |  FCS  |
| :------: | :---: | :----: | :----: | :---: | :---------: | :---: |
|  7Byte   | 1Byte | 6Byte  | 6Byte  | 2Byte | 46~1500Byte | 4Byte |
<-[[용어|프레임]]을 간략화 한 것

- Preamble: 프레임 시작 전 수신하는 전 동기화를 위한 데이터
	- 10101010을 7번 연속으로 반복 
	- 7byte
- SFD(Start of Frame Delimiter): 이더넷 헤더에 속하지는 않고 헤더 앞에 위치해서 프레임 시작한다는 것을 알리는 전기신호
	- 10101011
	- 1byte
- 이더넷 헤더
	- 이더넷 헤더는 위 표에서 \[목적지 주소, 출발지 주소, 타입\]로 3가지의 값을 가짐
	- 14byte로 구성됨
		- 목적지 MAC 주소 6byte
		- 출발지 MAC 주소 6byte
		- 상위 프로토콜 타입(Type) 2byte
- 데이터 
	- 프레임이 전달하는 데이터 또는 바디 또는 페이로드(payload)
	- 이더넷 헤더를 벗기면 패킷이 됨
	- 46~1500byte
- FCS
	- 프레임의 맨 뒤에 붙어서 데이터가 깨지거나 변형되었는지 확인하는 값
	- 4byte


### 프레임 수신 과정 ###
- 프레임을 수신함
- Preamble을 읽고 프레임과 동기화
- SFD를 읽고 이더넷 헤더가 시작됨을 인지
- 이더넷 헤더의 목적지/출발지 주소를 확인
- 타입을 읽어 다음 계층 프로토콜 헤더이 어떤것인지 인지
- 다음 프로토콜 헤더 수신
- ...
- FCS를 읽어 데이터의 무결성을 검사


프레임: L2
패킷: L3

이더넷은 프로토콜이다!
- LAN에서 유선 케이블로 컴퓨터들을 연결해 데이터를 주고받는 규칙






ARP: IP를 가지고 MAC 주소를 알아내는 프로토콜





---
# 기타 #

### 포트주소 ###
- 동일한 IP 주소를 가진 시스템 내에서 프로세스를 구분하기 위한 주소
- 0~2<sup>16</sup>(=65536)-1 범위의 번호를 사용 -> 16비트 주소
- 0~2<sup>10</sup>(=1024)-1: Well-known port(=System port), 잘 알려진 서비스/서버 들이 사용
- 1024~49151: Registered port(=User port), 응용프로그램들 사용, 서버나 클라이언트가 사용할 때도 있음
- 49151~65535: Dynamic port, 접속을 하는 용도로 주로 사용, 주로 클라이언트들이 사용



















#질문
- Q1. 
- A1. 





















