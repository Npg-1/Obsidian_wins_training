p.293

# 1. 방화벽의 이해 #
방화벽이란 네트워크에서 불법 침입을 **차단**하기 위해 일반적으로 네트워크 구조의 최상단에 위치하며, 접근 시도를 **1차적 제어, 통제(허용/거부)** 함으로써 내부 네트워크를 보조하는 역할을 수행

- ## TCP/IP ##
	- TCP/IP는 통신 프로토콜 중에서 TCP와 IP를 주로 사용하는 프로토콜로 TCP와 IP만이 아니라 UDP, ICMP, ARP, IGMP 등 관련된 프로토콜을 통칭하는 것이다.
	- 전송계층으로는 TCP와 UDP 두 개의 프로토콜이 있다.
	
	- ### TCP데이터 전송과정 ###
		- 세션 연결 -> 데이터 전송 -> 세션 종료
			- 세션 연결(3-WAY-HANDSHAKE)
				1) 클라이언트가 서버에 SYN을 보내 통신 요청
				2) SYN을 받은 서버가 ACK을 보내 통신 승인함
				3) 클라이언트에서 다시 서버에 SYN을 보내 세션을 성립함
			
			- 데이터 전송 (각 패킷마다 엄격하게 이 과정을 매번 거치지는 않고 여러개를 한 번에 하는 등 유동적임)
				1) PSH를 서버에 보내 데이터 요청
				2) PSH를 받은 서버는 ACK을 보내 데이터 요청을 승인함
				3) 서버는 PSH를 보내고 데이터를 전송
				4) 클라이언트는 데이터를 받았다는 것을 확인하고 ACK로 응답함
			
			- 세션 종료(4-WAY-HANDSHAKE)
				1) 세션 종료를 위해 FIN-ANK를 서버에 보내 종료 요청
				2) FIN-ACK를 받은 서버는 ACK를 보내 승인
				3) 클라이언트에 FIN-ACK를 보내고 통신 종료를 하겠다고 전달
				4) 클라이언트는 통신 종료에 대한 마지막 ACK를 서버에 전달
	
	- ### TCP 제어 플래그 ###
		- SYN(연결요청)
		- ACK(응답메시지)
		- PSH(수신한 데이터를 어플레케이션 계층으로 전달)
		- RST('강제'로 세션을 종료)
		- FIN('정상'으로 세션을 종료)

- ## UDP 데이터 전송과정 ##





- ## TCP와 UDP 비교 ##

| 구분    |           TCP           |           UDP           |
| ----- | :---------------------: | :---------------------: |
| 특징    |      신뢰성, 연결지향성 전송      |      비신뢰성, 비연결성 전송      |
| 전송속도  |        UDP에 비해느림        | 빠름(실시간 전송에 좋음, 예: 스트리밍) |
| 전송제어  |   오류제어, 순서제어, 흐름제어 수행   |        수행하는 것 X         |
| 헤더 길이 |          20바이트          |          8바이트           |
| 사용 포트 | HTTP, HTP, SMTP, Talnet |    DHCP, SNMP, TFTP     |


세션 연결: SYN 전송, ACK 수신, ACK 전송

데이터 전송: PSH, ACK

세션 종료: FIN-ACK



---
## 2. NGFW의 특장점 및 소개 ##
NGFW(Next-Generation FireWall): 기존 방화벽의 기능에 애플리케이션 가시성 및 제어, 침입 방지 시스템(IPS), 심층 패킷 검사(DPI), 위협 인텔리전스 등 고급 보안 기능을 통합하여, 단순 포트/프로토콜 기반 필터링을 넘어 애플리케이션과 콘텐츠 수준에서 위협을 식별하고 차단하는 진보된 네트워크 보안 솔루션




방화벽 차단정책은 TOP-DOWN 방식으로 동작함

보안홀(Security Hole): 보안 취약점



Well-Known: 443, 22와 같은 1~1024까지 잘 알려진 포트번호, 이걸로 포트번호를 하면 보안에 많이많이 취약해짐


방화벽 권한
- 쓰기 권한(설정 권한): 쓰기 권한을 가진 사용자는 동시 접속 불가함



L2 통신은 다 같은 대역이기 때문에 통신이 같음
L3 모드는 네트워크 대역이 분리가 됨



10.100.4.3:8443 으로 접속(SNIPER NGFW)해서 방화벽을 사용하는 방법을 익힘


슈퍼관리자 계정
sniper
보안00!#@$

교육생 계정
root002
sniper_002














방화벽 기준으로 모든 망들이 통신하기 위한 방화벽 라우팅을 구성하세요(디폴트 게이트웨이 제외)

목적지(ex 0.0.0.0/0)	 게이트웨이 (ex 172.16.0.1)





정답
외부서비스망
55.161.188.128/27 -> 55.16.188.10

무선망
10.254.250.0/24 -> 10.10.0.4

유선망 라우팅 필요 X

DMZ망
55.163.189.0/24 -> 55.163.191.4
192.168.0.0/24 -> 55.163.191.4





























